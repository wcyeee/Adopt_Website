<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>動物領養平台</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet">
    <link rel="icon" href="image/i_logo.ico" type="image/x-icon">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
    
<body>
    <!-- 導覽列 -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top">
        <div class="container-fluid">
        <img src="/docs/5.3/assets/brand/bootstrap-logo.svg" alt="Bootstrap" width="30" height="24">

        <!-- 網頁變窄的時候會出現的toggle按鈕-->
        <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
        >
        <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav nav-underline me-auto mb-2 mb-lg-0">
            <li class="nav-item">
                <a class="nav-link" aria-current="page" href="index.html">網站介紹</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="adopt.html">我要領養</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" aria-current="page" href="login.html">登入 / 註冊</a>
            </li>
            </ul>
        </div>
        </div>
    </nav>

    <!-- 動物園動畫區 -->
  <div class="pet-container" title="點擊切換狀態，拖曳移動">
    <img src="image/frame1.png" class="frame active" data-state="walk" alt="走路1" />
    <img src="image/frame2.png" class="frame" data-state="walk" alt="走路2" />
    <img src="image/frame3.png" class="frame" data-state="walk" alt="走路3" />
    <img src="image/idle.png" class="frame" data-state="idle" alt="靜止" />
    <img src="image/happy.png" class="frame" data-state="happy" alt="快樂" />
  </div>
  <div class="pet-container" title="點擊切換狀態，拖曳移動">
    <img src="image/frame1.png" class="frame active" data-state="walk" alt="走路1" />
    <img src="image/frame2.png" class="frame" data-state="walk" alt="走路2" />
    <img src="image/frame3.png" class="frame" data-state="walk" alt="走路3" />
    <img src="image/idle.png" class="frame" data-state="idle" alt="靜止" />
    <img src="image/happy.png" class="frame" data-state="happy" alt="快樂" />
  </div>
  <div class="pet-container" title="點擊切換狀態，拖曳移動">
    <img src="image/frame1.png" class="frame active" data-state="walk" alt="走路1" />
    <img src="image/frame2.png" class="frame" data-state="walk" alt="走路2" />
    <img src="image/frame3.png" class="frame" data-state="walk" alt="走路3" />
    <img src="image/idle.png" class="frame" data-state="idle" alt="靜止" />
    <img src="image/happy.png" class="frame" data-state="happy" alt="快樂" />
  </div>

  <!-- 動物詳細頁面 -->
  <div class="detail-container">
    <img src="image/pig.jpg" alt="動物圖片" class="detail-img" />
    <div class="detail-info">
      <button id="openAdoptFormBtn" class="btn btn-primary adopt-btn">我要領養！</button>
      <h1>小黃</h1>
      <h3>特徵描述</h3>
      <p>
        動物種類：豬<br>
        動物年齡：5個月<br>
        動物性別：女生<br>
        領養狀態：預約領養／尚未領養
      </p>
    </div>
    <div id="detail-medical" class="w-100 mt-3">
      <h2>醫療狀態</h2>
      <p>
        結紮狀態：未結紮<br>
        已施打疫苗：未施打
      </p>
    </div>
    <div id="detail-desc" class="w-100 mt-3">
      <h2>送養說明</h2>
      <p>
        1344134413441344134413441344134413441344134413441344
      </p>
    </div>
  </div>

  <!-- 領養申請浮動視窗 -->
  <div id="adoptAnimalForm" class="modal-form" style="display:none;">
    <form id="adoptForm" class="d-flex flex-column gap-4 p-4">
      <h1>領養申請表單</h1>
      <p>
        請完整填寫自我介紹，讓送養者更認識您！
      </p>
      <div class="form-floating mb-3">
        <textarea class="form-control" id="selfIntro" placeholder="自我介紹" required style="height: 200px;"></textarea>
        <label>自我介紹</label>
      </div>
      <div class="d-flex justify-content-end gap-2">
        <button type="button" id="cancelAdoptBtn" class="btn btn-secondary">取消</button>
        <button type="submit" id="submitAdoptBtn" class="btn btn-primary">申請</button>
      </div>
    </form>
  </div>

  <!-- 遮罩 -->
  <div id="overlay" class="overlay" style="display: none;"></div>

    
    <!-- 頁尾 -->
    <footer>
        <p>
            <a href="index.html">網站介紹</a>
            <span class="divider"> · </span>
            <a href="adopt.html">我要領養</a>
            <span class="divider"> · </span>
            <a href="login.html">登入/註冊</a>
            <br>
            Copyright &#169; 2025 領養動物網站 All rights reserved
        </p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <script src="script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
          const adoptAnimalForm = document.getElementById("adoptAnimalForm");
          const adoptForm = document.getElementById("adoptForm");
          const openAdoptBtn = document.getElementById("openAdoptFormBtn"); 
          const cancelAdoptBtn = document.getElementById("cancelAdoptBtn");
          const submitAdoptBtn = document.getElementById("submitAdoptBtn");
          const overlay = document.getElementById("overlay");
        
          function openForm() {
            adoptAnimalForm.style.display = "block";
            if (overlay) overlay.style.display = "block";
            setTimeout(() => {
              adoptAnimalForm.classList.add("show");
              if (overlay) overlay.classList.add("show");
            }, 10);
          }
        
          function closeForm() {
            adoptAnimalForm.classList.remove("show");
            if (overlay) overlay.classList.remove("show");
        
            adoptAnimalForm.removeEventListener("transitionend", onFormTransitionEnd);
            adoptAnimalForm.addEventListener("transitionend", onFormTransitionEnd, { once: true });
        
            if (overlay) {
              overlay.removeEventListener("transitionend", onOverlayTransitionEnd);
              overlay.addEventListener("transitionend", onOverlayTransitionEnd, { once: true });
            }
          }
        
          function onFormTransitionEnd() {
            if (!adoptAnimalForm.classList.contains("show")) {
              adoptAnimalForm.style.display = "none";
              adoptForm.reset();
            }
          }
        
          function onOverlayTransitionEnd() {
            if (overlay && !overlay.classList.contains("show")) {
              overlay.style.display = "none";
            }
          }
        
          if (openAdoptBtn) {
            openAdoptBtn.addEventListener("click", () => {
              console.log("點擊成功");
              openForm();
            });
          }
        
          if (cancelAdoptBtn) cancelAdoptBtn.addEventListener("click", closeForm);
          if (overlay) overlay.addEventListener("click", closeForm);
        
          adoptForm.addEventListener("submit", e => {
            e.preventDefault();
            const intro = document.getElementById("selfIntro").value.trim();
            if (!intro) {
              alert("請填寫自我介紹後再送出");
              return;
            }
            alert("申請已送出！");
            closeForm();
          });
        });   
    </script>
</body>
</html>